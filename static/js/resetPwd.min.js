$(function() {
  //确认提交
	var email = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/; //验证邮箱
   $('#vertify-btn').click(function(event) {
   	  var eVal = $('#email').val();
   	  if(email.test(eVal)){
   	  	$.ajax({
   	  		url:'/user/send/email/resetPwd',
   	  		type:'POST',
   	  		datatype:'text',
   	  		data:$('#resetForm').serialize(),
   	  		success:function(con){
   	  			if(con=='发送成功'){showMsg('验证链接已发到你的邮箱,请前往邮箱按照指示操作!');close_current_page(5000);}
   	  			else{showMsg(con);}
   	  		},
   	  		error:function(){
   	  		   showMsg('请求失败,请稍后再试');
   	  		},
   	  	});
   	  }
   	  else{showMsg('邮箱不符合要求!');}
   });

   var pwd = /^[a-zA-Z0-9]{6,16}/
   $('#handle-btn').click(function(event) { 
   		var p1 = $('#newPwd').val();
   		var p2 = $('#confirmPwd').val();   	
    	if(pwd.test($('#newPwd').val())){
    		if(p1==p2){
    			$.ajax({
    			url:'/user/handle/resetPassword',
    			type:'POST',
    			datatype:'text',
    			data:$('#resetForm').serialize(),
    			success:function(con){	
    				if(con=='重置密码成功!'){showMsg(con+'3秒后自动跳转到登录页面!');setTimeout(to_login,3000);}
    				else{msg.text(con);showMsg(con);}
    			},
    			error:function(){
    				   showMsg('请求失败,请稍后再试');
    			},
    		 });
    		}
    		else{showMsg('两次密码不一致!');}	
    	}
    	else{showMsg('密码不符合要求!');}
    	
    });
 });