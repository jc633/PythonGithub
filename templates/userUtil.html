<!DOCTYPE html>
<html>
<head>
	<title>账号设置</title>
	{%load static%}
	<link rel="stylesheet" type="text/css" href="{% static 'css/Validform_v5.3.2_min.css'%}">
	<style type="text/css">
		.set-bar{width: 1300px;height: inherit;margin:0 auto;margin-top: 50px;}
		.actCommon{height: 90%;margin-top: 2%;background-color:#FCFCFC;padding: 10px;border-radius: 8px;box-shadow: 0 0 10px #C5C4C4;}
		.act-bar{width: 20%;margin-left: 6%;}
		.util-bar{width: 60%;margin-right: 6%;}
		.act-item{width:60%;height: 8%;font-size: 20px;text-align: center;border:1px solid #DDDBDB;border-radius: 15px;margin-top: 25px;margin-left: 20%;}
		.act-item:hover{background-color: #EAE7E7}
		.basic-form{width:70%;height: 70%;padding: 10px;}
		.accoun-form{width: auto;height: auto;}
		.item{width: 90%;height:45px;font-size: 20px;margin-top: 20px}
		.item div{float:left;margin-left: 20px}
		.uImg{width: 100px;height: 100px;border-radius: 50%;margin-top: -25px;cursor: pointer;}
		.valid-msg{width: 150px;height: inherit;}
	</style>
</head>
<body>
  {%include 'top.html'%}
  <div id="accountSet" style="width: 100%;height:500px;">
  	 <div class="set-bar" style="">
  	 	<div class="act-bar actCommon  pull-left nav nav-tabs">
  	 		<div v-for="(value,key) in acts" class="act-item "><a :href=[[value]] data-toggle="tab">[[key]]</a></div>
  	 	</div>
  	 	<div class="util-bar actCommon pull-right tab-content">
  	 		<div id="basicInfor" class="tab-pane active fade in" >
  	 			<form action="{%url 'alterInfor'%}" class="basic-form" method="post" enctype="multipart/form-data" target="testFrame" @change="changeBasic">
  	 				{%csrf_token%}
					<div class="item">
						<div>头像</div>
						<div >
							<input type="file" name="userImg" style="display: none;" id="upImg" @change="preview">
							<img src="{{MEDIA_URL}}{{request.user.uImg}}" class="uImg" @click="chooseImg" title="点击选择图片">
						</div>
					</div>
					<div class="item" style="margin-top:50px">
						<div>昵称</div>
						<div><input type="text" datatype="s2-8"name="uName" value="{{request.user.uName}}" class="form-control" errormsg="昵称长度不符合要求" placeholder="请输入2~8位昵称"></div>
						<div class="valid-msg"></div>
					</div>
					<div class="item">
						<div>性别</div>
						{%if request.user.uSex%}
						<div>{{request.user.uSex}}</div>
					    {%else%}
						<div><input type="radio" name="sex" value="男" checked="checked">男&emsp;&emsp;<input type="radio" name="sex" value="女">女</div>
						<div style="font-size: 14px;color: red;">*注意,此项选择提交后不可再更改</div>
						{%endif%}
					</div>
  	 				
  	 				<div class="item">
  	 					<div><button class="btn btn-success saveInfor" disabled="disabled" type="submit">保存信息</button></div>
  	 				</div>
  	 			</form>
  	 		</div>
  	 		<div id="accout" class="tab-pane fade in">
  	 		    <div class="alert alert-danger" style="font-size: 18px">绑定手机和邮箱，操作更安全，密码忘记不担心。</div>		
				<form action="{%url 'alterInfor'%}" class="account-form" method="post" target="testFrame"
				 @change="changeAccount">
					<div class="item">
						<div>手机</div>
						<div class="phone">{{request.user.uPhone}}</div>
						<div><a href="javascript:;">绑定手机</a></div>
					</div>
		
  	 				{%csrf_token%}
					<div class="item" v-if="changeEmail">
						<div>邮箱</div>
						<div class="email">{{request.user.uEmail}}</div>
						<div>
						 {%if request.user.email_active%}
						 已绑定
						 {%else%}
						 <a href="javascript:;">绑定邮箱</a>
						 {%endif%}
						 &nbsp;|&nbsp;<a href="javascript:;" @click="updateEmail">修改邮箱</a>
						</div>
					</div>
					<div class="item" v-if="alterEmail">
						<div>新邮箱</div>
						<div>
						<input type="text" name="email" class="form-control" datatype="e" errormsg="邮箱格式不正确" placeholder="请输入新邮箱">
						</div>
						<div class="valid-msg"><span class="Validform_checktip"></span></div>
					</div>
					<div class="item" v-if="changePwd">
						<div>密码</div>
						<div>********</div>
						<div><a href="javascript:;" @click="updatePwd">修改密码</a></div>
					</div>
					<div v-if="alterPwd">
						<div class="item">
							<div>原密码</div>
							<div>
								<input type="password" name="oldPwd"class="form-control" datatype="s6-16" errormsg="密码为6~16位字符" placeholder="请输入原密码">
							</div>
							<div class="valid-msg"><span class="Validform_checktip"></span></div>
						</div>
						<div class="item">
							<div>新密码</div>
							<div>
							<input type="password" name="newPwd" class="form-control"  datatype="s6-16" errormsg="密码为6~16位字符"placeholder="请输入新密码">
							</div>
							<div class="valid-msg"><span class="Validform_checktip"></span></div>
						</div>
					</div>
  	 				<div class="item">
  	 					<div><button class="btn btn-default" @click="cancelUtil" v-if="listen">取消</button></div>
  	 					<div><button class="btn btn-success saveInfor"  type="submit" disabled="disabled">保存信息</button></div>
  	 				</div>
  	 			</form>
  	 		</div>
  	 		<div id="newsNotice" class="tab-pane fade in">
  	 			<div class="alert alert-success" style="font-size: 18px">有什么好意见?欢迎反馈</div>
  	 			<div class="item">
  	 				<div></div>
  	 			</div>
  	 		</div>
  	 	</div>
  	 </div>
  </div>
  <iframe src="about:blank" id="testFrame" name="testFrame" style="display: none;width: 0;height: 0;">
  </iframe>
  {%include 'bottom.html'%}
  <style type="text/css">
  	body{background-color: #F8F5F5;}
  </style>
<script type="text/javascript" src="{%static 'js/bootstrap.min.js'%}"></script>
<script type="text/javascript" src="{% static 'js/Validform_v5.3.2_min.js'%}"></script>
<script type="text/javascript" src="{%static 'js/accountSet.min.js'%}"></script>
<script type="text/javascript">
	$(function() {
		$('#head_bar1').attr('id', 'head_bar');
	});
</script>
</body>
</html>